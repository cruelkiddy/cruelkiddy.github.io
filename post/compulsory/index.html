<!DOCTYPE html>
<html lang="en-us">
  <head><meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta http-equiv="x-ua-compatible" content="ie=edge"><title>Dongxu&#39;s Blog</title>
    
<link rel="icon" type="image/png" href="/images/favicon.png" />


<link href="https://fonts.googleapis.com/css?family=Open&#43;Sans" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Open&#43;Sans" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Open&#43;Sans" rel="stylesheet"><link rel="stylesheet" type="text/css" href="/css/style.min.f4d8930701ac14f288dcb4efc7475f6ccd49ced8b270c4a433d0cd58b6eb8a93.css" integrity="sha256-9NiTBwGsFPKI3LTvx0dfbM1JztiycMSkM9DNWLbripM=">
<link rel="stylesheet" type="text/css" href="/css/monokai-sublime.9.15.8.min.min.3a5d282f03108101d715e80fd4c07b55502ec4673fc063f2b6e415d4def5b354.css" integrity="sha256-Ol0oLwMQgQHXFegP1MB7VVAuxGc/wGPytuQV1N71s1Q=">
<link rel="stylesheet" type="text/css" href="/css/icons.min.56faae60f16170cbfab5c036036aafb37d367aa4d4f4483b335bd98b891fa00b.css" integrity="sha256-VvquYPFhcMv6tcA2A2qvs302eqTU9Eg7M1vZi4kfoAs=">
<link rel="stylesheet" type="text/css" href="/css/mycss.min.8dbf4fbe59ea8af9be1d67d084bc8698e032e05602f08b8fe84ca0d2d46c298d.css" integrity="sha256-jb9Pvlnqivm&#43;HWfQhLyGmOAy4FYC8IuP6Eyg0tRsKY0=">

  </head>
  <body>
    
    <div id="preloader">
      <div id="status"></div>
    </div><nav class="navbar is-fresh is-transparent no-shadow" role="navigation" aria-label="main navigation">
  <div class="container">
    <div class="navbar-brand">

      
      
      
      <a class="navbar-item">
        <div class="menu-icon-wrapper left-menu-icon-wrapper" style="visibility: visible;">
          <svg width="1000px" height="1000px">
            <path class="path1" d="M 300 400 L 700 400 C 900 400 900 750 600 850 A 400 400 0 0 1 200 200 L 800 800"></path>
            <path class="path2" d="M 300 500 L 700 500"></path>
            <path class="path3" d="M 700 600 L 300 600 C 100 600 100 200 400 150 A 400 380 0 1 1 200 800 L 800 200"></path>
          </svg>
          <button id="menu-icon-trigger" class="menu-icon-trigger"></button>
        </div>
        <div class="navbar-item left-menu-icon-wrapper">Tags</div>
      </a>

      <div class="navbar-item is-expanded"></div>
      <a class="navbar-item is-hidden-desktop">  
        <div data-target="navbar-menu" class="navbar-item right-menu-icon-wrapper is-hidden-desktop">Menu</div>
        <div data-target="navbar-menu" class="menu-icon-wrapper right-menu-icon-wrapper" style="visibility: visible;">
          <svg width="1000px" height="1000px">
            <path class="path1" d="M 300 400 L 700 400 C 900 400 900 750 600 850 A 400 400 0 0 1 200 200 L 800 800"></path>
            <path class="path2" d="M 300 500 L 700 500"></path>
            <path class="path3" d="M 700 600 L 300 600 C 100 600 100 200 400 150 A 400 380 0 1 1 200 800 L 800 200"></path>
          </svg>
          <button id="menu-icon-trigger" class="menu-icon-trigger"></button>
        </div>
      </a>
    </div>

    

    <div id="navbar-menu" class="navbar-menu is-static">
      
      <div class="navbar-end">
        <a href="/about" class="navbar-item is-secondary">
          About Me
        </a><a href="https://cruelkiddy.github.io/post/" class="navbar-item is-secondary">Posts</a></div>
    </div>




  </div>
</nav><nav id="navbar-clone" class="navbar is-fresh is-transparent" role="navigation" aria-label="main navigation">
  <div class="container">
      <div class="navbar-brand">
  
        
        
        
        <a class="navbar-item">
          <div class="menu-icon-wrapper left-menu-icon-wrapper" style="visibility: visible;">
            <svg width="1000px" height="1000px">
              <path class="path1" d="M 300 400 L 700 400 C 900 400 900 750 600 850 A 400 400 0 0 1 200 200 L 800 800"></path>
              <path class="path2" d="M 300 500 L 700 500"></path>
              <path class="path3" d="M 700 600 L 300 600 C 100 600 100 200 400 150 A 400 380 0 1 1 200 800 L 800 200"></path>
            </svg>
            <button id="menu-icon-trigger" class="menu-icon-trigger"></button>
          </div>
          <div class="navbar-item left-menu-icon-wrapper">Tags</div>
        </a>
  
        <div class="navbar-item is-expanded"></div>
        <a class="navbar-item is-hidden-desktop">  
          <div data-target="cloned-navbar-menu" class="navbar-item right-menu-icon-wrapper is-hidden-desktop">Menu</div>
          <div data-target="cloned-navbar-menu" class="menu-icon-wrapper right-menu-icon-wrapper" style="visibility: visible;">
            <svg width="1000px" height="1000px">
              <path class="path1" d="M 300 400 L 700 400 C 900 400 900 750 600 850 A 400 400 0 0 1 200 200 L 800 800"></path>
              <path class="path2" d="M 300 500 L 700 500"></path>
              <path class="path3" d="M 700 600 L 300 600 C 100 600 100 200 400 150 A 400 380 0 1 1 200 800 L 800 200"></path>
            </svg>
            <button id="menu-icon-trigger" class="menu-icon-trigger"></button>
          </div>
        </a>
      </div>
  
      
  
      <div id="cloned-navbar-menu" class="navbar-menu is-static">
        <div class="navbar-end">
          <a href="/about" class="navbar-item is-secondary">
            About Me
          </a><a href="https://cruelkiddy.github.io/post/" class="navbar-item is-secondary">Posts</a></div>
      </div>
  
  
  
  
    </div>
  </nav>
<section class="section is-medium">
  <div class="container">
    <div class="columns">
      <div class="column is-centered-tablet-portrait">
        <h1 class="title is-2 section-title">直方图的强迫</h1>
        <h5 class="subtitle is-5 is-muted"></h5>
        <div class="divider"></div>
        
        <section class="section content has-text-justified">
          <h2 id="背景">背景</h2>

<p>今天《数字图像处理》课上讲了直方图均衡，由于种种原因，我产生了一种强迫性的行为：我要尽可能严谨地讲清楚直方图均衡的来龙去脉，在做到这点之前，我十分痛苦。下面讲的就是我强迫性的行为所带来的“收获”</p>

<h2 id="我的强迫">我的强迫</h2>

<ol>
<li>直方图的概念</li>
</ol>

<p><a href="https://zh.wikipedia.org/wiki/%E7%9B%B4%E6%96%B9%E5%9B%BE#%E5%BD%92%E4%B8%80%E5%8C%96%E7%9B%B4%E6%96%B9%E5%9B%BE">直方图</a></p>

<ol start="2">
<li>什么是直方图均衡，为何要这样做</li>
</ol>

<p>直方图均衡是一种图像“变换”，直观的看，变换后图像的直方图变成了一个在整个定义域上常函数。维基说：</p>

<blockquote>
<p>这种方法通常用来增加许多图像的全局<a href="https://zh.wikipedia.org/wiki/對比度">对比度</a>，尤其是当图像的有用数据的对比度相当接近的时候。通过这种方法，<a href="https://zh.wikipedia.org/wiki/亮度">亮度</a>可以更好地在直方图上分布。这样就可以用于增强局部的对比度而不影响整体的对比度，直方图均衡化通过有效地扩展常用的亮度来实现这种功能。</p>

<p>这种方法对于背景和前景都太亮或者太暗的图像非常有用，这种方法尤其是可以带来<a href="https://zh.wikipedia.org/wiki/X光">X光</a>图像中更好的<a href="https://zh.wikipedia.org/wiki/骨骼">骨骼</a>结构显示以及曝光过度或者曝光不足<a href="https://zh.wikipedia.org/wiki/照片">照片</a>中更好的细节。这种方法的一个主要优势是它是一个相当直观的技术并且是<a href="https://zh.wikipedia.org/wiki/可逆">可逆</a>操作，如果已知均衡化<a href="https://zh.wikipedia.org/wiki/函数">函数</a>，那么就可以恢复原始的直方图，并且计算量也不大。这种方法的一个缺点是它对处理的数据不加选择，它可能会增加背景<a href="https://zh.wikipedia.org/wiki/噪声">噪声</a>的对比度并且降低有用<a href="https://zh.wikipedia.org/wiki/信号">信号</a>的对比度。</p>
</blockquote>

<p>至于直方图是如何达到这种效果的，在比较清楚地了解了其背后的原理后再进行讨论。总之，我们要做的是找到一个变换 <span  class="math">\(T(x)\)</span>  使得变换后的<span  class="math">\(T(image)\)</span> 的直方图是一个常函数<span  class="math">\(f(rank) = K\)</span> , <span  class="math">\(\forall\)</span><span  class="math">\(rank\)</span> <span  class="math">\(\in\)</span> <span  class="math">\(RankDomain\)</span></p>

<ol start="3">
<li>如何找到这样的一个变换<span  class="math">\(T(x)\)</span></li>
</ol>

<p>根据一些图像处理的知识，变换<span  class="math">\(T(x)\)</span> 需要满足以下一些条件：</p>

<p>（i）<span  class="math">\(T(x)\)</span>是广义单调增加的。这保证像素之间灰度级的大小关系保持不变。</p>

<p>下面引入概率论的思想来求这个变换。将像素点<span  class="math">\(i\)</span>的灰度值视为一个随机变量<span  class="math">\(\xi_i\)</span>，</p>

<p><span  class="math">\[\xi_i \coprod  \xi_j ， \forall i\ne j ， i, j \in Image\]</span></p>

<p>定义概率<span  class="math">\(P(\xi = k)\)</span> = <span  class="math">\(\frac{n_k}{n}\)</span></p>

<p><span  class="math">\(n_k\)</span> <span  class="math">\(:=\)</span>  灰度为<span  class="math">\(k\)</span>的像素点的个数</p>

<p><span  class="math">\(n:=\)</span>    图像总像素点个数</p>

<hr>

<p>弃更了，google到一篇很清楚的解释，数学也比较严谨<a href="https://www.math.uci.edu/icamp/courses/math77c/demos/hist_eq.pdf">在这里</a></p>

<p>会搜索是多么重要，<span  class="math">\(Gan\)</span>。</p>

<p>(提高hugo对markdown数学公式的支持<a href="https://butui.me/post/yet-best-math-formula-support-for-hugo-with-mathjax/">请看这里</a>)</p>

        </section>
      </div>
    </div>
  </div>  
  <div class="container">
    <div class="columns">
      <div class="column has-text-right is-family-monospace is-centered-tablet-portrait">
        Last modified:8 October 2019</div>
    </div>
  </div></section><footer class="footer footer-dark">
  <div class="container">
    <div class="columns">
      <div class="column">
        <img src="/footer.svg" alt="">
        
      </div>
      
    <div class="column">
        <div class="footer-column">
          <div class="footer-header">
              <h3>Website</h3>
          </div>
          <ul class="link-list">
            <li>
                <a href="/credits">
                  <span class="icon"><i class="fa fa-cube"></i></span>
                  Credits
                </a>
              </li>
            <li>
              <a href="/tags">
                <span class="icon"><i class="fa fa-tag"></i></span> 
                All Tags
              </a>
            </li>
          </ul>
        </div>
      </div>
    
      <div class="column">
        <div class="footer-column">
          <div class="footer-header">
              <h3>Contacts</h3>
          </div>
          <ul class="link-list">
            <li>
              <a href="" target="_blank">
                <span class="icon"><i class="fa fa-linkedin"></i></span>
                Linkedin
              </a>
            </li>
            <li>
              <a href="mailto:cruelkiddy@qq.com" target="_blank">
                <span class="icon"><i class="fa fa-envelope"></i></span>
                cruelkiddy@qq.com
              </a>
            </li>
          </ul>
        </div>
      </div>

      <div class="column">
        <div class="footer-column">
          <div class="footer-header">
              <h3>Copyright</h3>
          </div>
          <ul class="link-list">
            <li>
              <a>
                <span class="icon"><i class="fa fa-copyright"></i></span>
                Something - 2019
              </a>
            </li>
          </ul>
        </div>
      </div>

    </div>
  </div>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-MML-AM_SVG"></script>
</footer>
    <div id="backtotop"><a href="#"></a></div><div class="sidebar">
  <div class="sidebar-header"><img src="/sidebar.svg" alt="">
    
    <a class="sidebar-close" href="javascript:void(0);">
      <i data-feather="x"></i>
    </a>
  </div>
  <div class="inner">
    <ul class="sidebar-menu">
      <li class="no-children">
          <a href="/tags">
            <div class="columns">
              <table width="100%">  
                <tr>
                  <td class="">
                    <span class="icon"><i class="fa fa-cubes"></i></span>All Tags
                  </td>
                  <td class="has-text-right" >
                      
                  </td>
                </tr>
              </table>
            </div>
          </a>
      <li class="no-children">
          <a href="/tags/sundries">
            <div class="columns">
              
              <table width="100%">  
                  <tr>
                    <td class=""><span class="icon"><i class="fa fa-cube"></i></span>Sundries</td>
                    <td class="has-text-right" >
                        <div class="tag-number">3</div>
                      
                    </td>
                    
                  </tr>
              </table>
              
            </div>
          </a>
      </li>
      <li class="no-children">
          <a href="/tags/android">
            <div class="columns">
              
              <table width="100%">  
                  <tr>
                    <td class=""><span class="icon"><i class="fa fa-cube"></i></span>Android</td>
                    <td class="has-text-right" >
                        <div class="tag-number">1</div>
                      
                    </td>
                    
                  </tr>
              </table>
              
            </div>
          </a>
      </li>
      <li class="no-children">
          <a href="/tags/eat">
            <div class="columns">
              
              <table width="100%">  
                  <tr>
                    <td class=""><span class="icon"><i class="fa fa-cube"></i></span>Eat</td>
                    <td class="has-text-right" >
                        <div class="tag-number">1</div>
                      
                    </td>
                    
                  </tr>
              </table>
              
            </div>
          </a>
      </li>
      <li class="no-children">
          <a href="/tags/ee-stuff">
            <div class="columns">
              
              <table width="100%">  
                  <tr>
                    <td class=""><span class="icon"><i class="fa fa-cube"></i></span>EE Stuff</td>
                    <td class="has-text-right" >
                        <div class="tag-number">1</div>
                      
                    </td>
                    
                  </tr>
              </table>
              
            </div>
          </a>
      </li>
      <li class="no-children">
          <a href="/tags/ladder">
            <div class="columns">
              
              <table width="100%">  
                  <tr>
                    <td class=""><span class="icon"><i class="fa fa-cube"></i></span>Ladder</td>
                    <td class="has-text-right" >
                        <div class="tag-number">1</div>
                      
                    </td>
                    
                  </tr>
              </table>
              
            </div>
          </a>
      </li></ul>
  </div>
</div>


<script src="/js/jquery-2.2.4.js"></script>
<script src="/js/feather.4.22.0.js"></script>
<script src="/js/modernizr-2.8.3.js"></script>
<script src="/js/fresh_new.js"></script>
<script src="/js/highlight.9.15.8.pack.js"></script>
<script src="/js/highlightjs-line-numbers.2.7.0.min.js"></script><script>hljs.initHighlightingOnLoad();</script>
<script>hljs.initLineNumbersOnLoad();</script>
<script>
document.addEventListener('DOMContentLoaded', (event) => {
    document.querySelectorAll('.codeinline').forEach((block) => {
      hljs.highlightBlock(block);
    });
  });
</script></body>
</html>